import{h as e,e as t,i as a,o as n,b as l,f as s,t as r,g as o,p as i,F as c,j as g,k as d,n as u,q as b}from"./vendor.c5ff6843.js";import{n as m,u as v,v as p,x,y as h,z as y,A as f}from"./role.cfbdf0a0.js";const k={setup(){const n=e(),l=t([]),s=t([]),r=t(""),o=t(""),i=t(!1),c=t(!1),g=t(!1);let d;return a((()=>{m.value?(v.ref("publicRoom").on("value",(e=>{e.val()?1!==Object.entries(e.val()).pop()[1]&&(l.value=Object.entries(e.val()).map((e=>({[e[0]]:Object.keys(Object.values(e[1])[0]).join("")})))):l.value=[]})),v.ref("privateRoom").on("value",(e=>{e.val()&&(s.value=Object.entries(e.val()).map((e=>Object.keys(e[1])[0])),d=Object.values(e.val()))}))):n.push("/")})),{router:n,data:l,enterRoom:(e,t)=>{t<0?n.push(`/room/${e}`):r.value=e,g.value=!1,o.value=""},searchView:i,searchClosure:e=>{"DIV"!==e.target.nodeName&&"I"!==e.target.nodeName||(i.value=!1,r.value="")},privateView:c,password:p,privateRoom:s,change:r,enterPrivateRoom:e=>{d.forEach((t=>{Object.keys(t).join("")===e&&(Object.values(t).join("")===o.value?n.push(`/room/${e}`):g.value=!0)}))},privatePassword:o,warn:g}}},w={class:"flex flex-col items-center sm:mt-20 mt-10 mx-3"},j={class:"flex mb-10"},O={class:"flex flex-col items-center sm:mr-24 mr-6"},C=s("img",{class:"max-w-28 h-32 mb-2",src:x,alt:""},null,-1),V={class:"flex flex-col items-center mr-3"},R=s("img",{class:"w-28 h-32 mb-2",src:h,alt:""},null,-1),P={class:"text-white dark:text-black"},$={class:"bg-gray-600 rounded-lg px-3 pt-3"},I=s("li",{class:"\n              flex\n              items-center\n              justify-between\n              border-bottom border-gray-900\n              pb-2\n              text-white\n            "},[s("span",{class:"text-gray-600"},"1"),s("span",{class:"text-lg"},"搜尋房間"),s("i",{class:"fas fa-times cursor-pointer hover:text-gray-800"})],-1),N={key:0,class:"ml-10"},U={key:0,class:"fas fa-lock mr-2"},q={key:1,class:"ml-4"},z={class:"flex mb-1"},A={class:"text-red-500"},D=s("i",{class:"fas fa-exclamation-triangle mr-1"},null,-1),E=u("密碼錯誤 "),F={class:"flex"},B={class:"flex flex-col items-center sm:mr-16 mr-4"},G=s("img",{class:"max-w-40 h-32 mb-2",src:y,alt:""},null,-1),H={class:"flex flex-col items-center"},J=s("img",{class:"max-w-28 h-32 mb-2",src:f,alt:""},null,-1),K={class:"\n          absolute\n          top-0\n          left-0\n          w-full\n          h-full\n          flex\n          justify-center\n          items-center\n          bg-white/25\n        "},L={class:"bg-gray-700 p-3 rounded-lg text-center"},M=s("label",{for:"password",class:"mb-1 text-white block"},[s("i",{class:"fas fa-lock mr-1"}),u("設定房間密碼")],-1);k.render=function(e,t,a,m,v,p){return n(),l("div",w,[s("div",j,[s("div",O,[C,s("button",{type:"button",class:"\n            text-lg\n            sm:text-2xl\n            bg-gray-700\n            dark:bg-gray-500\n            dark:hover:bg-gray-600\n            hover:bg-gray-900\n            text-white\n            rounded-lg\n            p-2\n          ",onClick:t[1]||(t[1]=e=>m.router.push("/chatroom"))}," 公開頻道 ")]),s("div",V,[R,s("button",{type:"button",class:["\n            text-lg\n            sm:text-2xl\n            bg-gray-700\n            dark:bg-gray-500\n            dark:hover:bg-gray-600\n            text-white\n            rounded-lg\n            p-2\n            mb-2\n          ",m.data.length?"hover:bg-gray-900":["disabled:opacity-50","cursor-default"]],disabled:!m.data.length,onClick:t[2]||(t[2]=e=>m.searchView=!0)}," 搜尋房間 ",10,["disabled"]),s("div",P,r(m.data.length?`(目前共有${m.data.length}間)`:"(目前無人建立房間)"),1)]),o(s("div",{class:"\n          absolute\n          top-0\n          left-0\n          w-full\n          h-full\n          flex\n          justify-center\n          items-center\n          bg-white/25\n        ",onClick:t[4]||(t[4]=(...e)=>m.searchClosure&&m.searchClosure(...e))},[s("ul",$,[I,(n(!0),l(c,null,g(m.data,(e=>(n(),l("li",{class:"flex justify-between items-center mb-3 text-white",key:e},[u(" 房主："+r(Object.values(e).join(""))+" ",1),m.change!==Object.keys(e).join("")?(n(),l("div",N,[m.privateRoom.indexOf(Object.keys(e).join(""))>=0?(n(),l("i",U)):b("",!0),s("button",{class:"\n                  text-sm\n                  bg-gray-700\n                  hover:bg-gray-900\n                  text-white\n                  rounded-lg\n                  p-2\n                ",onClick:t=>m.enterRoom(Object.keys(e).join(""),m.privateRoom.indexOf(Object.keys(e).join("")))}," 進入房間 ",8,["onClick"])])):(n(),l("div",q,[s("div",z,[o(s("input",{class:"pl-2 rounded-l-lg text-black",type:"text",placeholder:"請輸入密碼","onUpdate:modelValue":t[3]||(t[3]=e=>m.privatePassword=e)},null,512),[[d,m.privatePassword]]),s("button",{class:"\n                    text-sm\n                    bg-gray-700\n                    hover:bg-gray-900\n                    text-white\n                    rounded-r-lg\n                    p-2\n                  ",onClick:t=>m.enterPrivateRoom(Object.keys(e).join(""))}," 確認 ",8,["onClick"])]),o(s("p",A,[D,E],512),[[i,m.warn]])]))])))),128))])],512),[[i,m.searchView]])]),s("div",F,[s("div",B,[G,s("button",{type:"button",class:"\n            text-lg\n            sm:text-2xl\n            bg-gray-700\n            dark:bg-gray-500\n            dark:hover:bg-gray-600\n            hover:bg-gray-900\n            text-white\n            rounded-lg\n            p-2\n          ",onClick:t[5]||(t[5]=e=>m.router.push("/public"))}," 建立公開房間 ")]),s("div",H,[J,s("button",{type:"button",class:"\n            text-lg\n            sm:text-2xl\n            bg-gray-700\n            dark:bg-gray-500\n            dark:hover:bg-gray-600\n            hover:bg-gray-900\n            text-white\n            rounded-lg\n            p-2\n          ",onClick:t[6]||(t[6]=e=>m.privateView=!0)}," 建立私人房間 ")]),o(s("div",K,[s("div",L,[M,o(s("input",{class:"mb-2 pl-2 rounded",type:"text",id:"password",placeholder:"請輸入密碼","onUpdate:modelValue":t[7]||(t[7]=e=>m.password=e)},null,512),[[d,m.password]]),s("div",null,[s("button",{class:"\n                bg-gray-900\n                dark:bg-gray-500\n                dark:hover:bg-gray-600\n                hover:bg-gray-800\n                text-white\n                rounded-lg\n                px-2\n                mr-2\n              ",onClick:t[8]||(t[8]=e=>m.privateView=!1)}," 取消 "),s("button",{class:"\n                bg-gray-900\n                dark:bg-gray-500\n                dark:hover:bg-gray-600\n                hover:bg-gray-800\n                text-white\n                rounded-lg\n                px-2\n              ",onClick:t[9]||(t[9]=e=>m.router.push("/private"))}," 建立房間 ")])])],512),[[i,m.privateView]])])])};export default k;
