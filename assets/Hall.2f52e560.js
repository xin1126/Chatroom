import{h as e,e as a,i as t,o as n,b as s,f as l,t as r,g as o,p as i,F as c,j as u,k as g,n as d,q as b}from"./vendor.c5ff6843.js";import{n as m,d as v,v as p,x as f,y,z as x,A as h}from"./role.557f8e2a.js";const k={setup(){const n=e(),s=a([]),l=a([]),r=a(""),o=a(""),i=a(""),c=a(!1),u=a(!1),g=a(!1);let d;return t((()=>{m.value?(v.ref("publicRoom").on("value",(e=>{e.val()?1!==Object.entries(e.val()).pop()[1]&&(s.value=Object.entries(e.val()).map((e=>({[e[0]]:Object.keys(Object.values(e[1])[0]).join("")})))):s.value=[]})),v.ref("privateRoom").on("value",(e=>{e.val()&&(l.value=Object.entries(e.val()).map((e=>Object.keys(e[1])[0])),d=Object.values(e.val()))}))):n.push("/")})),{router:n,data:s,chatroom:()=>{i.value=1,setTimeout((()=>{i.value="",n.push("/chatroom")}),1500)},enterRoom:(e,a)=>{a<0?(i.value=e,setTimeout((()=>{i.value="",n.push(`/room/${e}`)}),1500)):r.value=e,g.value=!1,o.value=""},searchView:c,searchClosure:e=>{"DIV"!==e.target.nodeName&&"I"!==e.target.nodeName||(c.value=!1,r.value="")},privateView:u,password:p,privateRoom:l,change:r,createPublicRoom:()=>{i.value=3,setTimeout((()=>{i.value="",n.push("/public")}),1500)},createPrivateRoom:()=>{i.value=2,setTimeout((()=>{i.value="",n.push("/private")}),1500)},enterPrivateRoom:e=>{d.forEach((a=>{Object.keys(a).join("")===e&&(Object.values(a).join("")===o.value?(g.value=!1,i.value=e,setTimeout((()=>{i.value="",n.push(`/room/${e}`)}),1500)):g.value=!0)}))},privatePassword:o,warn:g,loading:i}}},w={class:"flex flex-col items-center sm:mt-20 mt-10 mx-3"},j={class:"flex mb-10"},O={class:"flex flex-col items-center sm:mr-24 mr-6"},R=l("img",{class:"max-w-28 h-32 mb-2",src:f,alt:""},null,-1),C={key:1,class:"fas fa-spinner fa-spin fa-2x mt-3"},P={class:"flex flex-col items-center mr-3"},V=l("img",{class:"w-28 h-32 mb-2",src:y,alt:""},null,-1),T={class:"text-white dark:text-black"},$={class:"bg-gray-600 rounded-lg px-3 pt-3"},I=l("li",{class:"\n              flex\n              items-center\n              justify-between\n              border-bottom border-gray-900\n              pb-2\n              text-white\n            "},[l("span",{class:"text-gray-600"},"1"),l("span",{class:"text-lg"},"搜尋房間"),l("i",{class:"fas fa-times cursor-pointer hover:text-gray-800"})],-1),N={key:0,class:"ml-10"},U={key:0,class:"fas fa-lock mr-2"},q={key:2,class:"fas fa-spinner fa-spin fa-2x mt-3"},z={key:1,class:"ml-4"},A={key:0,class:"flex justify-end mb-1"},D={key:1,class:"fas fa-spinner fa-spin fa-2x mt-3"},E={class:"text-red-500"},F=l("i",{class:"fas fa-exclamation-triangle mr-1"},null,-1),B=d("密碼錯誤 "),G={class:"flex"},H={class:"flex flex-col items-center sm:mr-16 mr-4"},J=l("img",{class:"max-w-40 h-32 mb-2",src:x,alt:""},null,-1),K={key:1,class:"fas fa-spinner fa-spin fa-2x mt-3"},L={class:"flex flex-col items-center"},M=l("img",{class:"max-w-28 h-32 mb-2",src:h,alt:""},null,-1),Q={class:"\n          absolute\n          top-0\n          left-0\n          w-full\n          h-full\n          flex\n          justify-center\n          items-center\n          bg-white/25\n        "},S={class:"bg-gray-700 p-3 rounded-lg text-center"},W=l("label",{for:"password",class:"mb-1 text-white block"},[l("i",{class:"fas fa-lock mr-1"}),d("設定房間密碼")],-1),X={key:1,class:"fas fa-spinner fa-spin fa-2x"};k.render=function(e,a,t,m,v,p){return n(),s("div",w,[l("div",j,[l("div",O,[R,1!==m.loading?(n(),s("button",{key:0,type:"button",class:"\n            text-lg\n            sm:text-2xl\n            bg-gray-700\n            dark:bg-gray-500\n            dark:hover:bg-gray-600\n            hover:bg-gray-900\n            text-white\n            rounded-lg\n            p-2\n          ",onClick:a[1]||(a[1]=(...e)=>m.chatroom&&m.chatroom(...e))}," 公開頻道 ")):(n(),s("i",C))]),l("div",P,[V,l("button",{type:"button",class:["\n            text-lg\n            sm:text-2xl\n            bg-gray-700\n            dark:bg-gray-500\n            dark:hover:bg-gray-600\n            text-white\n            rounded-lg\n            p-2\n            mb-2\n          ",m.data.length?"hover:bg-gray-900":["disabled:opacity-50","cursor-default"]],disabled:!m.data.length,onClick:a[2]||(a[2]=e=>m.searchView=!0)}," 搜尋房間 ",10,["disabled"]),l("div",T,r(m.data.length?`(目前共有${m.data.length}間)`:"(目前無人建立房間)"),1)]),o(l("div",{class:"\n          absolute\n          top-0\n          left-0\n          w-full\n          h-full\n          flex\n          justify-center\n          items-center\n          bg-white/25\n        ",onClick:a[4]||(a[4]=(...e)=>m.searchClosure&&m.searchClosure(...e))},[l("ul",$,[I,(n(!0),s(c,null,u(m.data,(e=>(n(),s("li",{class:"flex justify-between items-center mb-3 text-white",key:e},[d(" 房主："+r(Object.values(e).join(""))+" ",1),m.change!==Object.keys(e).join("")?(n(),s("div",N,[m.privateRoom.indexOf(Object.keys(e).join(""))>=0?(n(),s("i",U)):b("",!0),m.loading!==Object.keys(e).join("")?(n(),s("button",{key:1,class:"\n                  text-sm\n                  bg-gray-700\n                  hover:bg-gray-900\n                  text-white\n                  rounded-lg\n                  p-2\n                ",onClick:a=>m.enterRoom(Object.keys(e).join(""),m.privateRoom.indexOf(Object.keys(e).join("")))}," 進入房間 ",8,["onClick"])):(n(),s("i",q))])):(n(),s("div",z,[m.loading!==Object.keys(e).join("")?(n(),s("div",A,[o(l("input",{class:"pl-2 rounded-l-lg text-black w-3/4",type:"text",placeholder:"請輸入密碼","onUpdate:modelValue":a[3]||(a[3]=e=>m.privatePassword=e)},null,512),[[g,m.privatePassword]]),l("button",{class:"\n                    text-sm\n                    bg-gray-700\n                    hover:bg-gray-900\n                    text-white\n                    rounded-r-lg\n                    p-2\n                  ",onClick:a=>m.enterPrivateRoom(Object.keys(e).join(""))}," 確認 ",8,["onClick"])])):(n(),s("i",D)),o(l("p",E,[F,B],512),[[i,m.warn]])]))])))),128))])],512),[[i,m.searchView]])]),l("div",G,[l("div",H,[J,3!==m.loading?(n(),s("button",{key:0,type:"button",class:"\n            text-lg\n            sm:text-2xl\n            bg-gray-700\n            dark:bg-gray-500\n            dark:hover:bg-gray-600\n            hover:bg-gray-900\n            text-white\n            rounded-lg\n            p-2\n          ",onClick:a[5]||(a[5]=(...e)=>m.createPublicRoom&&m.createPublicRoom(...e))}," 建立公開房間 ")):(n(),s("i",K))]),l("div",L,[M,l("button",{type:"button",class:"\n            text-lg\n            sm:text-2xl\n            bg-gray-700\n            dark:bg-gray-500\n            dark:hover:bg-gray-600\n            hover:bg-gray-900\n            text-white\n            rounded-lg\n            p-2\n          ",onClick:a[6]||(a[6]=e=>m.privateView=!0)}," 建立私人房間 ")]),o(l("div",Q,[l("div",S,[W,o(l("input",{class:"mb-2 pl-2 rounded",type:"text",id:"password",placeholder:"請輸入密碼","onUpdate:modelValue":a[7]||(a[7]=e=>m.password=e)},null,512),[[g,m.password]]),l("div",null,[l("button",{class:"\n                bg-gray-900\n                dark:bg-gray-500\n                dark:hover:bg-gray-600\n                hover:bg-gray-800\n                text-white\n                rounded-lg\n                px-2\n                mr-2\n              ",onClick:a[8]||(a[8]=e=>m.privateView=!1)}," 取消 "),2!==m.loading?(n(),s("button",{key:0,class:"\n                bg-gray-900\n                dark:bg-gray-500\n                dark:hover:bg-gray-600\n                hover:bg-gray-800\n                text-white\n                rounded-lg\n                px-2\n              ",onClick:a[9]||(a[9]=(...e)=>m.createPrivateRoom&&m.createPrivateRoom(...e))}," 建立房間 ")):(n(),s("i",X))])])],512),[[i,m.privateView]])])])};export default k;
